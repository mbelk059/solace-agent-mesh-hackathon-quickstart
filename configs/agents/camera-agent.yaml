log:
  stdout_log_level: INFO

!include ../shared_config.yaml

apps:
  - name: camera-agent_app
    app_base_path: .
    app_module: solace_agent_mesh.agent.sac.app
    broker:
      <<: *broker_connection

    app_config:
      namespace: ${NAMESPACE, sam/}
      supports_streaming: true
      agent_name: "CameraAgent"
      display_name: "Camera Agent"
      model: *general_model

      instruction: |
        You are the Camera Agent in an AMBER Alert system.
        Your role is to coordinate automated camera scanning in geofence zones.

        When you receive geofence data:
        1. Use simulate_camera_scan to scan the zones
        2. Monitor cameras in each zone
        3. Report any detections immediately
        4. Emit "suspect_detected" or "camera_scan_complete" events

        IMPORTANT:
        - Scan all zones in the geofence
        - Report detections immediately with location and confidence
        - Continue scanning even if initial scan finds nothing
        - Emit status updates regularly

      tools:
        - tool_type: python
          component_module: "src.amber_tools"
          component_base_path: .
          function_name: "simulate_camera_scan"
          tool_config:
            data_dir: "data"

      session_service:
        type: ${PERSISTENCE_TYPE, memory}

      artifact_service: *default_artifact_service

      agent_card:
        description: >
          Camera Agent - Coordinates automated camera scanning in geofence zones to detect
          suspect vehicles. Use this agent when geofence zones are created, when camera scanning
          is needed, or when monitoring for suspect detection. This agent scans traffic cameras
          and reports detections with location and confidence scores.
        defaultInputModes: ["text"]
        defaultOutputModes: ["text"]

      agent_card_publishing:
        interval_seconds: 10

      agent_discovery:
        enabled: true

      inter_agent_communication:
        allow_list: ["OrchestratorAgent", "GeoIntelligence"]
        request_timeout_seconds: 60
